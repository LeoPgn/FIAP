CREATE TABLE alerta_equipamento (
    id_alerta                      NUMBER(10) NOT NULL,
    dt_alerta                      DATE NOT NULL,
    nivel_alerta                   VARCHAR2(40) NOT NULL,
    descr_alerta                   VARCHAR2(400) NOT NULL,
    status_alerta                  VARCHAR2(40) NOT NULL,
    parceiros_id_parceiro          NUMBER(10) NOT NULL,
    leitura_equipamento_id_leitura NUMBER(10) NOT NULL,
    usuario_id_user                NUMBER(10) NOT NULL
);

CREATE TABLE equipamento (
    id_equip              NUMBER(10) NOT NULL,
    tipo_equip            VARCHAR2(40) NOT NULL,
    dt_equip              DATE NOT NULL,
    parceiros_id_parceiro NUMBER(10) NOT NULL
);

ALTER TABLE equipamento ADD CONSTRAINT equipamento_pk PRIMARY KEY ( id_equip );

CREATE TABLE funcionario (
    id_func               NUMBER(10) NOT NULL,
    nome_func             VARCHAR2(100) NOT NULL,
    email_func            VARCHAR2(100) NOT NULL,
    senha_func            NUMBER(40) NOT NULL,
    parceiros_id_parceiro NUMBER(10) NOT NULL
);

ALTER TABLE funcionario ADD CONSTRAINT funcionario_pk PRIMARY KEY ( id_func );

CREATE TABLE leitura_equipamento (
    id_leitura                 NUMBER(10) NOT NULL,
    dt_leitura                 DATE NOT NULL,
    tipo_leitura               VARCHAR2(40) NOT NULL,
    valor_leitura              NUMBER(3, 2) NOT NULL,
    local_equipamento_id_local NUMBER(10) NOT NULL,
    parceiros_id_parceiro      NUMBER(10) NOT NULL,
    usuario_id_user            NUMBER(10) NOT NULL,
    equipamento_id_equip       NUMBER(10) NOT NULL
);

ALTER TABLE leitura_equipamento ADD CONSTRAINT leitura_equipamento_pk PRIMARY KEY ( id_leitura );

CREATE TABLE local_equipamento (
    id_local        NUMBER(10) NOT NULL,
    nome_local      VARCHAR2(100) NOT NULL,
    latitude_local  VARCHAR2(40) NOT NULL,
    longitude_local VARCHAR2(40) NOT NULL
);

ALTER TABLE local_equipamento ADD CONSTRAINT local_equipamento_pk PRIMARY KEY ( id_local );

CREATE TABLE manutencao_equipamento (
    id_manut               NUMBER(10) NOT NULL,
    dt_manut               DATE NOT NULL,
    tipo_manut             VARCHAR2(40) NOT NULL,
    responsavel_manut      VARCHAR2(100) NOT NULL,
    equipamento_id_equip   NUMBER(10) NOT NULL,
    funcionario_id_func    NUMBER(10) NOT NULL,
    relatorio_id_relatorio NUMBER(10) NOT NULL,
    parceiros_id_parceiro  NUMBER(10) NOT NULL
);

CREATE UNIQUE INDEX manutencao_equipamento__idx ON
    manutencao_equipamento (
        relatorio_id_relatorio
    ASC );

CREATE TABLE parceiros (
    id_parceiro   NUMBER(10) NOT NULL,
    nome_parc     VARCHAR2(100) NOT NULL,
    cnpj_parc     CHAR(14) NOT NULL,
    endereco_parc VARCHAR2(100) NOT NULL,
    contato_parc  VARCHAR2(20) NOT NULL,
    tipo_parc     VARCHAR2(40) NOT NULL
);

ALTER TABLE parceiros ADD CONSTRAINT parceiros_pk PRIMARY KEY ( id_parceiro );

CREATE TABLE relatorio (
    id_relatorio         NUMBER(10) NOT NULL,
    descr_relatorio      VARCHAR2(500) NOT NULL,
    dt_relatorio         DATE NOT NULL,
    imagem_relatorio     BLOB,
    funcionario_id_func  NUMBER(10) NOT NULL,
    equipamento_id_equip NUMBER(10) NOT NULL
);

ALTER TABLE relatorio ADD CONSTRAINT relatorio_pk PRIMARY KEY ( id_relatorio );

CREATE TABLE usuario (
    id_user    NUMBER(10) NOT NULL,
    nome_user  VARCHAR2(100) NOT NULL,
    email_user VARCHAR2(100) NOT NULL,
    senha_user VARCHAR2(40) NOT NULL
);

ALTER TABLE usuario ADD CONSTRAINT usuario_pk PRIMARY KEY ( id_user );

--  ERROR: FK name length exceeds maximum allowed length(30) 
ALTER TABLE alerta_equipamento
    ADD CONSTRAINT alerta_equip_leitura_equip_fk FOREIGN KEY ( leitura_equipamento_id_leitura )
        REFERENCES leitura_equipamento ( id_leitura );

--  ERROR: FK name length exceeds maximum allowed length(30) 
ALTER TABLE alerta_equipamento
    ADD CONSTRAINT alerta_equip_parc_fk FOREIGN KEY ( parceiros_id_parceiro )
        REFERENCES parceiros ( id_parceiro );

ALTER TABLE alerta_equipamento
    ADD CONSTRAINT alerta_equip_usuario_fk FOREIGN KEY ( usuario_id_user )
        REFERENCES usuario ( id_user );

ALTER TABLE equipamento
    ADD CONSTRAINT equip_parceiros_fk FOREIGN KEY ( parceiros_id_parceiro )
        REFERENCES parceiros ( id_parceiro );

ALTER TABLE funcionario
    ADD CONSTRAINT func_parc_fk FOREIGN KEY ( parceiros_id_parceiro )
        REFERENCES parceiros ( id_parceiro );

--  ERROR: FK name length exceeds maximum allowed length(30) 
ALTER TABLE leitura_equipamento
    ADD CONSTRAINT leitura_equip_equip_fk FOREIGN KEY ( equipamento_id_equip )
        REFERENCES equipamento ( id_equip );

--  ERROR: FK name length exceeds maximum allowed length(30) 
ALTER TABLE leitura_equipamento
    ADD CONSTRAINT leitura_equip_local_equip_fk FOREIGN KEY ( local_equipamento_id_local )
        REFERENCES local_equipamento ( id_local );

--  ERROR: FK name length exceeds maximum allowed length(30) 
ALTER TABLE leitura_equipamento
    ADD CONSTRAINT leitura_equip_parc_fk FOREIGN KEY ( parceiros_id_parceiro )
        REFERENCES parceiros ( id_parceiro );

ALTER TABLE leitura_equipamento
    ADD CONSTRAINT leitura_equip_usuario_fk FOREIGN KEY ( usuario_id_user )
        REFERENCES usuario ( id_user );

--  ERROR: FK name length exceeds maximum allowed length(30) 
ALTER TABLE manutencao_equipamento
    ADD CONSTRAINT manut_equip_equip_fk FOREIGN KEY ( equipamento_id_equip )
        REFERENCES equipamento ( id_equip );

--  ERROR: FK name length exceeds maximum allowed length(30) 
ALTER TABLE manutencao_equipamento
    ADD CONSTRAINT manut_equip_func_fk FOREIGN KEY ( funcionario_id_func )
        REFERENCES funcionario ( id_func );

--  ERROR: FK name length exceeds maximum allowed length(30) 
ALTER TABLE manutencao_equipamento
    ADD CONSTRAINT manut_equip_parceiros_fk FOREIGN KEY ( parceiros_id_parceiro )
        REFERENCES parceiros ( id_parceiro );

--  ERROR: FK name length exceeds maximum allowed length(30) 
ALTER TABLE manutencao_equipamento
    ADD CONSTRAINT manut_equip_relatorio_fk FOREIGN KEY ( relatorio_id_relatorio )
        REFERENCES relatorio ( id_relatorio );

ALTER TABLE relatorio
    ADD CONSTRAINT relatorio_equip_fk FOREIGN KEY ( equipamento_id_equip )
        REFERENCES equipamento ( id_equip );

ALTER TABLE relatorio
    ADD CONSTRAINT relatorio_func_fk FOREIGN KEY ( funcionario_id_func )
        REFERENCES funcionario ( id_func );
